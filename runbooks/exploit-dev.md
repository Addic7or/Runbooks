# Exploit Dev
Notes on exploit development

## Buffer Overflow

```uname -a```

List system info including kernel

```cat /proc/sys/kernel/randomize_va_space```

Check for ASLR(check table below for more info)

| Value | Type |
|-------|-------------|
| 0  | No randomization. Everything is static |
| 1  | Conservative randomization. Shared libraries, stack, mmap(), VDSO and heap are randomized |
| 2  | Full randomization. In addition to elements listed in the previous point, memory managed through brk() is also randomized |


```echo 0 | sudo tee /proc/sys/kernel/randomize_va_space```

Disable ASLR(Will not survive reboot)

```echo 2 | sudo tee /proc/sys/kernel/randomize_va_space```

Enable ASLR

```kernel.randomize_va_space = 0```

Set this inside(/etc/sysctl.d/01-disable-aslr.conf) to make persistant

```setarch `uname -m` -R /bin/bash```

Open bash shell with ASLR disabled

**Testing**

```./filename $(python -c 'print "A"*100')```

Simple small buffer into binary

```(gdb)run $(python -c 'print "A"*100')```

Simple small buffer into binary with GDB

## Trouble shooting

Issue
```
./elf
bash: ./elf: No such file or directory
```
This issue exists when running 32 bit elf files on 64 bit systems

Solution
```
dpkg --add-architecture i386 
apt-get update
apt-get install libc6:i386
```

Works on Debian systems

## Resources

* [GDB-Peda](https://github.com/longld/peda)
* [GDB-Peda Cheatsheet](https://github.com/ebtaleb/peda_cheatsheet/blob/master/peda.md)
